var Fi=Object.defineProperty;var Ei=(t,e,n)=>e in t?Fi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ke=(t,e,n)=>Ei(t,typeof e!="symbol"?e+"":e,n);import{b as on,e as Ai,c as ve,a as R,t as W,d as Nt}from"../chunks/disclose-version.BiUaKtt4.js";import{L as Li,h as wn,k as le,B as at,C as ct,v as Di,J as xn,a2 as Oi,a3 as an,A as St,l as Re,a4 as kn,i as Dt,a5 as Ri,am as Ct,q as dt,M as Ft,an as Ot,O as A,ao as Rt,ap as zi,N as ji,Y as rn,aq as Mi,I as Bi,ar as qi,j as In,as as Nn,x as Sn,D as Pi,at as Hi,y as Cn,F as Ki,z as Vi,au as Ui,av as Gi,a1 as sn,aw as Ji,E as Yi,ax as Wi,ay as Zi,a6 as Qi,b as Xi,az as $i,n as lt,aA as el,aB as tl,a7 as nl,t as il,_ as ll,p as vt,m as ee,o as ht,Q as P,R as q,S as J,P as te,g as l,aC as Tn,al as Se,a as Et,aD as Le,aE as ol,aF as cn,aG as fn,aH as se,e as pe,ac as un,ag as al,f as At}from"../chunks/runtime.CL2T5sGH.js";import{i as ce,p as v,a as ye,o as rl,b as rt,l as dn,c as sl}from"../chunks/index-client.021jSvij.js";import{i as cl,c as vn,d as zt,n as fl,a as ul,b as dl,s as he,e as G}from"../chunks/render.NOOskAEa.js";import{i as vl}from"../chunks/lifecycle.DrzSAoBa.js";let st=null;function ft(t,e){return e}function hl(t,e,n,a){for(var s=[],u=e.length,d=0;d<u;d++)Mi(e[d].e,s,!0);var g=u>0&&s.length===0&&n!==null;if(g){var c=n.parentNode;Bi(c),c.append(n),a.clear(),Ne(t,e[0].prev,e[u-1].next)}qi(s,()=>{for(var _=0;_<u;_++){var p=e[_];g||(a.delete(p.k),Ne(t,p.prev,p.next)),In(p.e,!g)}})}function Ve(t,e,n,a,s,u=null){var d=t,g={flags:e,items:new Map,first:null},c=(e&Nn)!==0;if(c){var _=t;d=le?at(Sn(_)):_.appendChild(Li())}le&&ct();var p=null;wn(()=>{var f=n(),b=Di(f)?f:f==null?[]:xn(f),y=b.length;let x=!1;if(le){var I=d.data===Oi;I!==(y===0)&&(d=an(),at(d),St(!1),x=!0)}if(le){for(var k=null,N,w=0;w<y;w++){if(Re.nodeType===8&&Re.data===Pi){d=Re,x=!0,St(!1);break}var h=b[w],S=a(h,w);N=Fn(Re,g,k,null,h,S,w,s,e),g.items.set(S,N),k=N}y>0&&at(an())}le||gl(b,g,d,s,e,a),u!==null&&(y===0?p?kn(p):p=Dt(()=>u(d)):p!==null&&Ri(p,()=>{p=null})),x&&St(!0)}),le&&(d=Re)}function gl(t,e,n,a,s,u){var ne,ie,_e,ge;var d=(s&Hi)!==0,g=(s&(Ot|Rt))!==0,c=t.length,_=e.items,p=e.first,f=p,b,y=null,x,I=[],k=[],N,w,h,S;if(d)for(S=0;S<c;S+=1)N=t[S],w=u(N,S),h=_.get(w),h!==void 0&&((ne=h.a)==null||ne.measure(),(x??(x=new Set)).add(h));for(S=0;S<c;S+=1){if(N=t[S],w=u(N,S),h=_.get(w),h===void 0){var H=f?f.e.nodes_start:n;y=Fn(H,e,y,y===null?e.first:y.next,N,w,S,a,s),_.set(w,y),I=[],k=[],f=y.next;continue}if(g&&_l(h,N,S,s),h.e.f&Ct&&(kn(h.e),d&&((ie=h.a)==null||ie.unfix(),(x??(x=new Set)).delete(h))),h!==f){if(b!==void 0&&b.has(h)){if(I.length<k.length){var oe=k[0],Q;y=oe.prev;var re=I[0],T=I[I.length-1];for(Q=0;Q<I.length;Q+=1)hn(I[Q],oe,n);for(Q=0;Q<k.length;Q+=1)b.delete(k[Q]);Ne(e,re.prev,T.next),Ne(e,y,re),Ne(e,T,oe),f=oe,y=T,S-=1,I=[],k=[]}else b.delete(h),hn(h,f,n),Ne(e,h.prev,h.next),Ne(e,h,y===null?e.first:y.next),Ne(e,y,h),y=h;continue}for(I=[],k=[];f!==null&&f.k!==w;)f.e.f&Ct||(b??(b=new Set)).add(f),k.push(f),f=f.next;if(f===null)continue;h=f}I.push(h),y=h,f=h.next}if(f!==null||b!==void 0){for(var F=b===void 0?[]:xn(b);f!==null;)f.e.f&Ct||F.push(f),f=f.next;var Y=F.length;if(Y>0){var X=s&Nn&&c===0?n:null;if(d){for(S=0;S<Y;S+=1)(_e=F[S].a)==null||_e.measure();for(S=0;S<Y;S+=1)(ge=F[S].a)==null||ge.fix()}hl(e,F,X,_)}}d&&dt(()=>{var L;if(x!==void 0)for(h of x)(L=h.a)==null||L.apply()}),Ft.first=e.first&&e.first.e,Ft.last=y&&y.e}function _l(t,e,n,a){a&Ot&&A(t.v,e),a&Rt?A(t.i,n):t.i=n}function Fn(t,e,n,a,s,u,d,g,c){var _=st;try{var p=(c&Ot)!==0,f=(c&zi)===0,b=p?f?ji(s):rn(s):s,y=c&Rt?rn(d):d,x={i:y,v:b,k:u,a:null,e:null,prev:n,next:a};return st=x,x.e=Dt(()=>g(t,b,y),le),x.e.prev=n&&n.e,x.e.next=a&&a.e,n===null?e.first=x:(n.next=x,n.e.next=x.e),a!==null&&(a.prev=x,a.e.prev=x.e),x}finally{st=_}}function hn(t,e,n){for(var a=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,u=t.e.nodes_start;u!==a;){var d=Cn(u);s.before(u),u=d}}function Ne(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Tt(t,e,n,a,s){var u=t,d="",g;wn(()=>{if(d===(d=e()??"")){le&&ct();return}g!==void 0&&(In(g),g=void 0),d!==""&&(g=Dt(()=>{if(le){Re.data;for(var c=ct(),_=c;c!==null&&(c.nodeType!==8||c.data!=="");)_=c,c=Cn(c);if(c===null)throw Ki(),Vi;on(Re,_),u=at(c);return}var p=d+"",f=Ai(p);on(Sn(f),f.lastChild),u.before(f)}))})}function De(t,e,n,a,s){var g;le&&ct();var u=(g=e.$$slots)==null?void 0:g[n],d=!1;u===!0&&(u=e[n==="default"?"children":n],d=!0),u===void 0?s!==null&&s(t):u(t,d?()=>a:a)}function ml(t,e){if(e){const n=document.body;t.autofocus=!0,dt(()=>{document.activeElement===n&&t.focus()})}}let gn=!1;function En(){gn||(gn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function An(t){if(le){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;we(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var s=t.checked;we(t,"checked",null),t.checked=s}}};t.__on_r=n,Ui(n),En()}}function we(t,e,n,a){var s=t.__attributes??(t.__attributes={});le&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=n)&&(e==="loading"&&(t[Gi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Ln(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function bl(t,e,n,a,s=!1,u=!1,d=!1){var g=e||{},c=t.tagName==="OPTION";for(var _ in e)_ in n||(n[_]=null);n.class=n.class?n.class+" "+a:a;var p=Ln(t),f=t.__attributes??(t.__attributes={}),b=[];for(const N in n){let w=n[N];if(c&&N==="value"&&w==null){t.value=t.__value="",g[N]=w;continue}var y=g[N];if(w!==y){g[N]=w;var x=N[0]+N[1];if(x!=="$$")if(x==="on"){const h={},S="$$"+N;let H=N.slice(2);var I=ul(H);if(cl(H)&&(H=H.slice(0,-7),h.capture=!0),!I&&y){if(w!=null)continue;t.removeEventListener(H,g[S],h),g[S]=null}if(w!=null)if(I)t[`__${H}`]=w,zt([H]);else{let oe=function(Q){g[N].call(this,Q)};e?g[S]=vn(H,t,oe,h):b.push([N,w,()=>g[S]=vn(H,t,oe,h)])}}else if(N==="style"&&w!=null)t.style.cssText=w+"";else if(N==="autofocus")ml(t,!!w);else if(N==="__value"||N==="value"&&w!=null)t.value=t[N]=t.__value=w;else{var k=N;s||(k=fl(k)),w==null&&!u?(f[N]=null,t.removeAttribute(N)):p.includes(k)&&(u||typeof w!="string")?t[k]=w:typeof w!="function"&&(le&&(k==="src"||k==="href"||k==="srcset")||we(t,k,w))}}}return e||dt(()=>{if(t.isConnected)for(const[N,w,h]of b)g[N]===w&&h()}),g}var _n=new Map;function Ln(t){var e=_n.get(t.nodeName);if(e)return e;_n.set(t.nodeName,e=[]);for(var n,a=sn(t);a.constructor.name!=="Element";){n=Ji(a);for(var s in n)n[s].set&&e.push(s);a=sn(a)}return e}function Lt(t,e){var n=t.__className,a=pl(e);le&&t.className===a?t.__className=a:(n!==a||le&&t.className!==a)&&(e==null?t.removeAttribute("class"):t.className=a,t.__className=a)}function pl(t){return t??""}function Oe(t,e,n){if(n){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const yl=requestAnimationFrame,wl=()=>performance.now(),Ce={tick:t=>yl(t),now:()=>wl(),tasks:new Set};function Dn(t){Ce.tasks.forEach(e=>{e.c(t)||(Ce.tasks.delete(e),e.f())}),Ce.tasks.size!==0&&Ce.tick(Dn)}function xl(t){let e;return Ce.tasks.size===0&&Ce.tick(Dn),{promise:new Promise(n=>{Ce.tasks.add(e={c:t,f:n})}),abort(){Ce.tasks.delete(e)}}}function ot(t,e){t.dispatchEvent(new CustomEvent(e))}function kl(t){const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function mn(t){const e={},n=t.split(";");for(const a of n){const[s,u]=a.split(":");if(!s||u===void 0)break;const d=kl(s.trim());e[d]=u.trim()}return e}const Il=t=>t;function Nl(t,e,n){var a=st,s,u,d,g=null;a.a??(a.a={element:t,measure(){s=this.element.getBoundingClientRect()},apply(){if(d==null||d.abort(),u=this.element.getBoundingClientRect(),s.left!==u.left||s.right!==u.right||s.top!==u.top||s.bottom!==u.bottom){const c=e()(this.element,{from:s,to:u},n==null?void 0:n());d=ut(this.element,c,void 0,1,()=>{d==null||d.abort(),d=void 0})}},fix(){if(!t.getAnimations().length){var{position:c,width:_,height:p}=getComputedStyle(t);if(c!=="absolute"&&c!=="fixed"){var f=t.style;g={position:f.position,width:f.width,height:f.height,transform:f.transform},f.position="absolute",f.width=_,f.height=p;var b=t.getBoundingClientRect();if(s.left!==b.left||s.top!==b.top){var y=`translate(${s.left-b.left}px, ${s.top-b.top}px)`;f.transform=f.transform?`${f.transform} ${y}`:y}}}},unfix(){if(g){var c=t.style;c.position=g.position,c.width=g.width,c.height=g.height,c.transform=g.transform}}}),a.a.element=t}function Sl(t,e,n,a){var s=(t&el)!==0,u="both",d,g=e.inert,c,_;function p(){return d??(d=n()(e,(a==null?void 0:a())??{},{direction:u}))}var f={is_global:s,in(){e.inert=g,ot(e,"introstart"),c=ut(e,p(),_,1,()=>{ot(e,"introend"),c==null||c.abort(),c=d=void 0})},out(I){e.inert=!0,ot(e,"outrostart"),_=ut(e,p(),c,0,()=>{ot(e,"outroend"),I==null||I()})},stop:()=>{c==null||c.abort(),_==null||_.abort()}},b=Ft;if((b.transitions??(b.transitions=[])).push(f),dl){var y=s;if(!y){for(var x=b.parent;x&&x.f&Yi;)for(;(x=x.parent)&&!(x.f&Wi););y=!x||(x.f&Zi)!==0}y&&Qi(()=>{Xi(()=>f.in())})}}function ut(t,e,n,a,s){var u=a===1;if($i(e)){var d,g=!1;return dt(()=>{if(!g){var k=e({direction:u?"in":"out"});d=ut(t,k,n,a,s)}}),{abort:()=>{g=!0,d==null||d.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(n==null||n.deactivate(),!(e!=null&&e.duration))return s(),{abort:lt,deactivate:lt,reset:lt,t:()=>a};const{delay:c=0,css:_,tick:p,easing:f=Il}=e;var b=[];if(u&&n===void 0&&(p&&p(0,1),_)){var y=mn(_(0,1));b.push(y,y)}var x=()=>1-a,I=t.animate(b,{duration:c});return I.onfinish=()=>{var k=(n==null?void 0:n.t())??1-a;n==null||n.abort();var N=a-k,w=e.duration*Math.abs(N),h=[];if(w>0){if(_)for(var S=Math.ceil(w/16.666666666666668),H=0;H<=S;H+=1){var oe=k+N*f(H/S),Q=_(oe,1-oe);h.push(mn(Q))}x=()=>{var re=I.currentTime;return k+N*f(re/w)},p&&xl(()=>{if(I.playState!=="running")return!1;var re=x();return p(re,1-re),!0})}I=t.animate(h,{duration:w,fill:"forwards"}),I.onfinish=()=>{x=()=>a,p==null||p(a,1-a),s()}},{abort:()=>{I&&(I.cancel(),I.effect=null)},deactivate:()=>{s=lt},reset:()=>{a===0&&(p==null||p(1,0))},t:()=>x()}}function Cl(t,e,n,a=n){t.addEventListener(e,n);const s=t.__on_r;s?t.__on_r=()=>{s(),a()}:t.__on_r=a,En()}function On(t,e,n=e){var a=tl();Cl(t,"input",()=>{var s=bn(t)?pn(t.value):t.value;n(s),a&&s!==(s=e())&&(t.value=s??"")}),nl(()=>{var s=e();if(le&&t.defaultValue!==t.value){n(t.value);return}bn(t)&&s===pn(t.value)||t.type==="date"&&!s&&!t.value||(t.value=s??"")})}function bn(t){var e=t.type;return e==="number"||e==="range"}function pn(t){return t===""?null:+t}function Tl(t,e,n){var a=ll(t,e);a&&a.set&&(t[e]=n,il(()=>{t[e]=null}))}function yn(t){return function(...e){var n=e[0];return n.preventDefault(),t==null?void 0:t.apply(this,e)}}class Fl{constructor(e,n,a,s=[]){Ke(this,"depth",0);Ke(this,"height",0);Ke(this,"parents",[]);Ke(this,"children",[]);this.node_name=e,this.node_type=n,this.tags=a,this.child_names=s}}var El=W('<div class="tag svelte-1tcrfx5"><div class="key"> </div> <div class="value svelte-1tcrfx5"> </div></div>'),Al=W("Tags: <!>",1),Ll=W('<div id="node-info-box" class="svelte-1tcrfx5"><div class="name svelte-1tcrfx5"> </div> <div class="type svelte-1tcrfx5"> </div> <!></div>');function Dl(t,e){vt(e,!0);var n=ve(),a=ee(n);ce(a,()=>e.selectedNode,s=>{var u=Ll(),d=P(u),g=P(d);q(d);var c=J(d,2),_=P(c);q(c);var p=J(c,2);ce(p,()=>Object.entries(e.selectedNode.tags).length,f=>{var b=Al(),y=J(ee(b));Ve(y,17,()=>Object.entries(e.selectedNode.tags),ft,(x,I)=>{let k=()=>l(I)[0],N=()=>l(I)[1];var w=El(),h=P(w),S=P(h);q(h);var H=J(h,2),oe=P(H);q(H),q(w),te(()=>{he(S,k()),he(oe,N())}),R(x,w)}),R(f,b)}),q(u),te(()=>{var f,b;he(g,(f=e.selectedNode)==null?void 0:f.node_name),he(_,`Node type: ${((b=e.selectedNode)==null?void 0:b.node_type)??""}`)}),R(s,u)}),R(t,n),ht()}function Ol(t,e,n){e(e()-n)}function Rl(t,e,n){e(e()-n)}function zl(t,e,n){e(e()+n)}function jl(t,e,n){e(e()+n)}function Ml(t,e,n){e(e()*n)}function Bl(t,e,n){e(e()/n)}function ql(t,e,n,a){e(0),n(0),a(1)}var Pl=W('<div id="view-control-wrapper" class="svelte-oj9z4e"><div class="control-button invisible svelte-oj9z4e"></div> <button aria-label="Scroll up" class="control-button svelte-oj9z4e"><i class="fa fa-caret-up svelte-oj9z4e"></i></button> <button aria-label="Zoom in" class="control-button svelte-oj9z4e"><i class="fa fa-magnifying-glass-plus svelte-oj9z4e"></i></button> <button aria-label="Scroll left" class="control-button svelte-oj9z4e"><i class="fa fa-caret-left svelte-oj9z4e"></i></button> <button aria-label="Reset scroll" class="control-button svelte-oj9z4e"><i class="fa fa-circle-dot svelte-oj9z4e"></i></button> <button aria-label="Scroll right" class="control-button svelte-oj9z4e"><i class="fa fa-caret-right svelte-oj9z4e"></i></button> <div class="control-button invisible svelte-oj9z4e"></div> <button aria-label="Scroll down" class="control-button svelte-oj9z4e"><i class="fa fa-caret-down svelte-oj9z4e"></i></button> <button aria-label="Zoom out" class="control-button svelte-oj9z4e"><i class="fa fa-magnifying-glass-minus svelte-oj9z4e"></i></button></div>');function Hl(t,e){let n=v(e,"vScroll",15),a=v(e,"hScroll",15),s=v(e,"zMult",15);const u=10,d=1.1;var g=Pl(),c=J(P(g),2);c.__click=[Ol,n,u];var _=J(c,2);_.__click=[Ml,s,d];var p=J(_,2);p.__click=[Rl,a,u];var f=J(p,2);f.__click=[ql,n,a,s];var b=J(f,2);b.__click=[jl,a,u];var y=J(b,4);y.__click=[zl,n,u];var x=J(y,2);x.__click=[Bl,s,d],q(g),R(t,g)}zt(["click"]);var Kl=W('<div id="max-depth-wrapper" class="svelte-13kjus7"><input type="text" inputmode="numeric" name="max-depth-input" class="svelte-13kjus7"> <label for="max-depth-input">Max Depth</label></div>');function Vl(t,e){let n=v(e,"maxDepth",15);var a=Kl(),s=P(a);An(s),Tn(2),q(a),On(s,n),R(t,a)}var Ul=(t,e,n)=>e(n()),Gl=W("<button> </button>"),Jl=W('<canvas class="svelte-j6tqjt"></canvas> <div id="elements" class="svelte-j6tqjt"><div id="elements-inner" class="svelte-j6tqjt"></div></div> <!> <!>',1);function Yl(t,e){vt(e,!0);let n=v(e,"selectedNode",15,null);const a=100,s=50,u=50,d=150,g=50,c=75;let _=Se(0),p=Se(0),f=Se(1),b=Se(0);function y(T){var F;n(T===((F=n())==null?void 0:F.node_name)?null:e.nodeList.find(Y=>Y.node_name===T)||null)}let x=Se(ye([]));Et(()=>{let T=e.nodeList.slice();e.nodeList.forEach(L=>{L.depth=0});const F=T.filter(L=>L.parents.length===0);for(;F.length;)F[0].children.forEach(L=>{F[0].depth>=L.depth&&(L.depth=F[0].depth+1,F.includes(L)||F.push(L))}),F.shift();if(T.toSorted((L,$)=>$.depth-L.depth).forEach(L=>L.depth=Math.max(L.depth+1,...L.children.map($=>$.depth))-1),l(b)>0&&e.isFiltered){const L=Math.max(...T.map($=>$.depth));L>l(b)&&(T=T.filter($=>($.depth-=L-l(b),$.depth>=0)))}let Y=0,X=0,ne=0,ie=0;function _e(L,$){T.forEach(Te=>{Te.depth===L&&(Te.height+=$)})}T.toSorted((L,$)=>L.depth-$.depth).forEach(L=>{L.depth>X&&(ne!==0&&_e(X,ne/ie),X=L.depth,Y=0,ne=0,ie=0),L.height=Y,Y+=1,ne+=L.parents.reduce(($,Te)=>Te.height-L.height+$,0),ie+=L.parents.length}),ne!==0&&_e(X,ne/ie);const ge=Math.min(...T.map(L=>L.height));ge<0&&T.forEach(L=>L.height-=ge),A(x,ye(T))});let I,k;function N(T,F){const Y={x:(T.depth*d+g+c/2+l(p))*l(f),y:(T.height*a+s+u/2+l(_))*l(f)},X={x:(F.depth*d+g+c/2+l(p))*l(f),y:(F.height*a+s+u/2+l(_))*l(f)},ne={x:(Y.x+X.x)/2,y:Y.y};k.beginPath(),k.moveTo(Y.x,Y.y),k.quadraticCurveTo(ne.x,ne.y,X.x,X.y),k.stroke()}rl(()=>{k=I.getContext("2d"),k.lineWidth=1,k.strokeStyle="#cccccc"}),Et(()=>{k.clearRect(0,0,I.width,I.height),l(x).forEach(T=>T.children.forEach(F=>N(T,F)))});var w=Jl(),h=ee(w);rt(h,T=>I=T,()=>I);var S=J(h,2),H=P(S);Ve(H,21,()=>l(x),ft,(T,F)=>{let Y=()=>l(F).node_name,X=()=>l(F).height,ne=()=>l(F).depth;var ie=Gl();ie.__click=[Ul,y,Y];var _e=P(ie);q(ie),te(()=>{var ge;Lt(ie,`node ${(Y()===((ge=n())==null?void 0:ge.node_name)?"selected":"")??""} svelte-j6tqjt`),we(ie,"style",`
					top: ${(X()*a+s+l(_))*l(f)}px;
					left: ${(ne()*d+g+l(p))*l(f)}px;
					transform: scale(${l(f)??""});
					`),he(_e,Y())}),R(T,ie)}),q(H),q(S);var Q=J(S,2);Hl(Q,{get vScroll(){return l(_)},set vScroll(T){A(_,ye(T))},get hScroll(){return l(p)},set hScroll(T){A(p,ye(T))},get zMult(){return l(f)},set zMult(T){A(f,ye(T))}});var re=J(Q,2);Vl(re,{get maxDepth(){return l(b)},set maxDepth(T){A(b,ye(T))}}),te(()=>{we(h,"height",e.height),we(h,"width",e.width)}),R(t,w),ht()}zt(["click"]);function Wl(t){const e=t-1;return e*e*e+1}function Zl(t,{from:e,to:n},a={}){var s=getComputedStyle(t),u=Ql(t),d=s.transform==="none"?"":s.transform,[g,c]=s.transformOrigin.split(" ").map(parseFloat),_=e.width/n.width,p=e.height/n.height,f=(e.left+_*g-(n.left+g))/u,b=(e.top+p*c-(n.top+c))/u,{delay:y=0,duration:x=k=>Math.sqrt(k)*120,easing:I=Wl}=a;return{delay:y,duration:typeof x=="function"?x(Math.sqrt(f*f+b*b)):x,easing:I,css:(k,N)=>{var w=N*f,h=N*b,S=k+N*_,H=k+N*p;return`transform: ${d} scale(${S}, ${H}) translate(${w}px, ${h}px);`}}}function Ql(t){if("currentCSSZoom"in t)return t.currentCSSZoom;for(var e=t,n=1;e!==null;)n*=+getComputedStyle(e).zoom,e=e.parentElement;return n}const Xl=t=>t;function $l(t,{delay:e=0,duration:n=400,easing:a=Xl}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:a,css:u=>`opacity: ${u*s}`}}var eo=W('<option selected class="svelte-75ckfb"> </option>'),to=W('<option selected class="svelte-75ckfb"> </option>'),no=W('<div class="tags has-addons svelte-75ckfb"><span class="tag svelte-75ckfb"> </span> <span class="tag is-delete svelte-75ckfb"></span></div>'),io=W('<div class="svelte-75ckfb"><!></div>'),lo=W('<span class="autocomplete-clear-button svelte-75ckfb"><!></span>'),oo=W('<div class="autocomplete-list-item svelte-75ckfb"><!></div>'),ao=W('<div class="autocomplete-list-item-no-results svelte-75ckfb"> </div>'),ro=W("<!> <!> <!>",1),so=W('<div class="autocomplete-list-item-loading svelte-75ckfb"><!></div>'),co=W('<div class="autocomplete-list-item-create svelte-75ckfb"><!></div>'),fo=W('<div class="autocomplete-list-item-no-results svelte-75ckfb"><!></div>'),uo=W('<div><select class="svelte-75ckfb"><!></select> <div class="input-container svelte-75ckfb"><!> <input> <!></div> <div><!></div></div>');function vo(t,e){const n=dn(e,["children","$$slots","$$events","$$legacy"]),a=dn(n,["highlightFilter","items","searchFunction","labelFieldName","keywordsFieldName","valueFieldName","labelFunction","keywordsFunction","valueFunction","keywordsCleanFunction","textCleanFunction","beforeChange","onChange","onFocus","onBlur","onCreate","selectFirstIfEmpty","minCharactersToSearch","maxItemsToShowInList","multiple","create","ignoreAccents","matchAllKeywords","sortByMatchedKeywords","itemFilterFunction","itemSortFunction","lock","delay","localFiltering","localSorting","cleanUserText","lowercaseKeywords","closeOnBlur","orderableSelection","hideArrow","showClear","clearText","showLoadingIndicator","noResultsText","loadingText","moreItemsText","createText","placeholder","className","inputClassName","inputId","name","selectName","selectId","title","html5autocomplete","autocompleteOffValue","readonly","dropdownClassName","disabled","noInputStyles","required","debug","tabindex","selectedItem","value","highlightedItem","text"]);vt(e,!1);const s=se(),u=se(),d=se(),g=se();let c=v(e,"items",28,()=>[]),_=v(e,"searchFunction",8,!1),p=v(e,"labelFieldName",8,void 0),f=v(e,"keywordsFieldName",24,p),b=v(e,"valueFieldName",8,void 0),y=v(e,"labelFunction",8,function(i){return i==null?"":p()?i[p()]:i}),x=v(e,"keywordsFunction",8,function(i){return i==null?"":f()?i[f()]:y()(i)}),I=v(e,"valueFunction",8,function(i,o=!1){return i==null?i:!F()||o?b()?i[b()]:i:i.map(r=>b()?r[b()]:r)}),k=v(e,"keywordsCleanFunction",8,function(i){return i}),N=v(e,"textCleanFunction",8,function(i){return i}),w=v(e,"beforeChange",8,function(i,o){return!0}),h=v(e,"onChange",8,function(i){}),S=v(e,"onFocus",8,function(){}),H=v(e,"onBlur",8,function(){}),oe=v(e,"onCreate",8,function(i){C()&&console.log("onCreate: "+i)}),Q=v(e,"selectFirstIfEmpty",8,!1),re=v(e,"minCharactersToSearch",8,1),T=v(e,"maxItemsToShowInList",8,0),F=v(e,"multiple",8,!1),Y=v(e,"create",8,!1),X=v(e,"ignoreAccents",8,!0),ne=v(e,"matchAllKeywords",8,!0),ie=v(e,"sortByMatchedKeywords",8,!1),_e=v(e,"itemFilterFunction",8,void 0),ge=v(e,"itemSortFunction",8,void 0),L=v(e,"lock",8,!1),$=v(e,"delay",8,0),Te=v(e,"localFiltering",8,!0),Rn=v(e,"localSorting",8,!0),zn=v(e,"cleanUserText",8,!0),jt=v(e,"lowercaseKeywords",8,!0),jn=v(e,"closeOnBlur",8,!1),Ue=v(e,"orderableSelection",8,!1),Mn=v(e,"hideArrow",8,!1),Mt=v(e,"showClear",8,!1),Bn=v(e,"clearText",8,"&#10006;"),qn=v(e,"showLoadingIndicator",8,!1),gt=v(e,"noResultsText",8,"No results found"),_t=v(e,"loadingText",8,"Loading results..."),Bt=v(e,"moreItemsText",8,"items not shown"),qt=v(e,"createText",8,"Not found, add anyway?"),Pn=v(e,"placeholder",8,void 0),Pt=v(e,"className",8,void 0),Ht=v(e,"inputClassName",8,void 0),ze=v(e,"inputId",8,void 0),Hn=v(e,"name",8,void 0),Kn=v(e,"selectName",8,void 0),Vn=v(e,"selectId",8,void 0),Un=v(e,"title",8,void 0),Gn=v(e,"html5autocomplete",8,void 0),Jn=v(e,"autocompleteOffValue",8,"off"),Yn=v(e,"readonly",8,void 0),Kt=v(e,"dropdownClassName",8,void 0),Wn=v(e,"disabled",8,!1),Zn=v(e,"noInputStyles",8,!1),Qn=v(e,"required",8,null),C=v(e,"debug",8,!1),Xn=v(e,"tabindex",8,0),E=v(e,"selectedItem",28,()=>F()?[]:void 0),$n=v(e,"value",12,void 0),ei=v(e,"highlightedItem",12,void 0);const Vt="sautocomplete-"+Math.floor(Math.random()*1e3);let Fe=se(),me=se(),mt=se(),xe=se(!1),Be=se(!1),Z=se(-1),fe=v(e,"text",12,void 0),qe=se(0),V=se(),ue=[],bt=0,Ee=0,pt,Ge=se(!1);sl(()=>{l(Ge)&&Ii(),A(Ge,!1)});function ti(i,o){if(typeof i!="function"){console.error("Not a function: "+i+", argument: "+o);return}let r;try{r=i(o)}catch{console.warn("Error executing Autocomplete function on value: "+o+" function: "+i)}return r}function Je(i,o){let r=ti(i,o);return r==null&&(r=""),typeof r!="string"&&(r=r.toString()),r}function je(i){return Je(y(),i)}function ni(i){const o=Je(x(),i);let r=Je(k(),o);return r=jt()?r.toLowerCase().trim():r,X()&&(r=et(r)),C()&&console.log("Extracted keywords: '"+r+"' from item: "+JSON.stringify(i)),r}function Ye(){let i;C()&&(i=`Autocomplete prepare list ${ze()?`(id: ${ze()})`:""}`,console.time(i),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(c()))),Array.isArray(c())||(console.warn("Autocomplete items / search function did not return array but",c()),c([]));const o=c()?c().length:0;ue=new Array(o),o>0&&c().forEach((r,m)=>{const O=ii(r);O===void 0&&console.log("Undefined item for: ",r),ue[m]=O}),A(V,ue),C()&&(console.log(ue.length+" items to search"),console.timeEnd(i))}function ii(i){return{keywords:Te()?ni(i):[],label:je(i),item:i}}function li(){$n(I()(E())),E()&&!F()&&fe(je(E())),A(V,ue),h()(E())}function oi(i){if(i==null)return"";if(!zn())return i;const o=i.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim(),r=Je(N(),o);return jt()?r.toLowerCase().trim():r.trim()}function yt(i,o){if(!i)return 0;const r=i.keywords;let m=0;return o.forEach(O=>{r.includes(O)&&(m+=1)}),m}async function Ut(){let i;C()&&(i=`Autocomplete search ${ze()?`(id: ${ze()})`:""}`,console.time(i),console.log("Searching user entered text: '"+fe()+"'"));let o=oi(fe());if(re()>1&&o.length<re()&&(o=""),A(qe,o.length),C()&&console.log("Changed user entered text '"+fe()+"' into '"+o+"'"),o===""&&(_()?(c([]),C()&&console.log("User entered text is empty clear list of items")):(A(V,ue),C()&&console.log("User entered text is empty set the list of items to all items")),Xt())){C()&&console.timeEnd(i);return}if(!_())We(o);else{bt=bt+1;const r=bt;if(A(Be,!0),_().constructor.name==="AsyncGeneratorFunction"){for await(const m of _()(o,T())){if(r<Ee)return!1;r>Ee&&c([]),Ee=r,c([...c(),...m]),We(o)}Ee<r&&(Ee=r,c([]),We(o))}else{let m=await _()(o,T());if(r<Ee)return!1;Ee=r,c(m),We(o)}A(Be,!1)}C()&&(console.timeEnd(i),console.log("Search found "+l(V).length+" items"))}function ai(i,o){const r=yt(i,o);return ne()?r>=o.length:r>0}function ri(i,o,r){return yt(o,r)-yt(i,r)}function We(i){Ye();const r=(X()?et(i):i).split(/\s+/g).filter(j=>j!=="");let m;Te()?(_e()?m=ue.filter(j=>_e()(j.item,r)):m=ue.filter(j=>ai(j,r)),Rn()&&(ge()?m=m.sort((j,D)=>ge()(j.item,D.item,r)):ie()&&(m=m.sort((j,D)=>ri(j,D,r))))):m=ue;const O=xt(r,"label");return A(V,m.map(O)),Xt(),!0}function Gt(i){let o;if(C()&&console.log("createdItem",i),typeof i<"u"){Ye(),A(V,ue);let r=Zt(i,l(V));r<=0&&(c([i]),Ye(),A(V,ue),r=0),r>=0&&(A(Z,r),o=l(V)[l(Z)])}return o}function wt(i){if(C()&&console.log("selectListItem",i),typeof i>"u"&&Y()){const r=oe()(fe());if(typeof r<"u"){if(typeof r.then=="function")return r.then(m=>{if(typeof m<"u"){const O=Gt(m);typeof O<"u"&&wt(O)}}),!0;i=Gt(r)}}if(typeof i>"u")return C()&&console.log("listItem is undefined. Can not select."),!1;if(l(g))return!0;const o=i.item;return w()(E(),o)&&(F()?E()?E().includes(o)?E(E().filter(r=>r!==o)):E([...E(),o]):E([o]):(E(void 0),E(o))),!0}function Ze(){C()&&console.log("selectItem",l(Z));const i=l(V)[l(Z)];wt(i)?(C()&&console.log("selectListItem true, closing"),ke(),F()&&(fe(""),l(Fe).focus())):C()&&console.log("selectListItem false, not closing")}function si(){C()&&console.log("up"),$e(),l(Z)>0&&un(Z,-1),Qe()}function ci(){C()&&console.log("down"),$e(),l(Z)<l(V).length-1&&un(Z),Qe()}function Qe(){C()&&console.log("highlight");const i=".selected";C()&&console.log("Seaching DOM element: "+i+" in "+l(me));const o=l(me)&&l(me).querySelector(i);o?typeof o.scrollIntoViewIfNeeded=="function"?(C()&&console.log("Scrolling selected item into view"),o.scrollIntoViewIfNeeded()):o.scrollIntoView==="function"?(C()&&console.log("Scrolling selected item into view"),o.scrollIntoView()):C()&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):C()&&console.warn("Selected item not found to scroll into view")}function Jt(i){C()&&console.log("onListItemClick"),wt(i)&&(ke(),F()&&(fe(""),l(Fe).focus()))}function fi(i){C()&&console.log("onDocumentClick"),i.composedPath().some(o=>o.classList&&o.classList.contains(Vt))?(C()&&console.log("onDocumentClick inside"),Qe()):(C()&&console.log("onDocumentClick outside"),ke())}function ui(i){C()&&console.log("onKeyDown");let o=i.key;o==="Tab"&&i.shiftKey&&(o="ShiftTab");const m={Tab:l(xe)?ke:null,ShiftTab:l(xe)?ke:null,ArrowDown:ci.bind(this),ArrowUp:si.bind(this),Escape:_i.bind(this),Backspace:F()&&l(u)&&!fe()?mi.bind(this):null}[o];typeof m=="function"&&m(i)}function di(i){C()&&console.log("onKeyPress"),i.key==="Enter"&&vi(i)}function vi(i){l(xe)&&(i.preventDefault(),Ze())}function hi(i){C()&&console.log("onInput"),fe(i.target.value),pt&&clearTimeout(pt),$()?pt=setTimeout(Yt,$()):Yt()}function Xe(i){C()&&console.log("unselectItem",i),E(E().filter(o=>o!==i)),l(Fe).focus()}function Yt(){Ut()&&(A(Z,0),$e())}function gi(){C()&&console.log("onInputClick"),Wt()}function _i(i){C()&&console.log("onEsc"),i.stopPropagation(),l(xe)&&(l(Fe).focus(),ke())}function mi(i){C()&&console.log("onBackspace"),Xe(E()[E().length-1])}function bi(){C()&&console.log("onFocus"),S()(),Wt()}function pi(){C()&&console.log("onBlur"),jn()&&ke(),H()()}function Wt(){if(C()&&console.log("resetListToAllItemsAndOpen"),_()&&!ue.length?Ut():fe()||A(V,ue),$e(),E()){C()&&console.log("Searching currently selected item: "+JSON.stringify(E()));const i=Zt(E(),l(V));i>=0&&(A(Z,i),Qe())}}function Zt(i,o){C()&&console.log("Finding index for item",i);let r=-1;for(let m=0;m<o.length;(m+=1)-1){const O=o[m];if(typeof O>"u"){C()&&console.log(`listItem ${m} is undefined. Skipping.`);continue}if(C()&&console.log("Item "+m+": "+JSON.stringify(O)),i===O.item){r=m;break}}return C()&&(r>=0?console.log("Found index for item: "+r):console.warn("Not found index for item: "+i)),r}function $e(){C()&&console.log("open"),!(l(g)||Qt())&&(A(Ge,!0),A(xe,!0))}function ke(){C()&&console.log("close"),A(xe,!1),A(Be,!1),!fe()&&Q()&&(A(Z,0),Ze())}function Qt(){return re()>0&&l(qe)<re()&&(_()||l(qe)>0)}function Xt(){return Qt()?(ke(),!0):!1}function $t(){C()&&console.log("clear"),fe(""),E(F()?[]:void 0),setTimeout(()=>{l(Fe).focus()})}function xt(i,o){return r=>{let m=r[o];const O=Object.assign({highlighted:void 0},r);O.highlighted=m;const j=m.toLowerCase(),D=X()?et(j):j;if(i&&i.length){const M=[];for(let z=0;z<i.length;(z+=1)-1){let B=i[z];X()&&(B=et(B));const U=B.length;let K=0;do if(K=D.indexOf(B,K),K>=0){let ae=K+U;M.push([K,ae]),K=ae}while(K!==-1)}if(M.length>0){const z=new Set;for(let B=0;B<M.length;(B+=1)-1){const U=M[B],K=U[0],ae=U[1],be=j.substring(K,ae);z.add(be)}for(let B of z){if(B==="b")continue;const U=new RegExp("("+B+")","ig"),K=O.highlighted.replace(U,"<b>$1</b>");O.highlighted=K}}}return O}}function et(i){return i.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function yi(i){return E()?F()?E().includes(i):i===E():!1}let tt=se(!1);function wi(i,o){Ue()&&i.dataTransfer.setData("source",o)}function en(i,o){Ue()&&(i.preventDefault(),A(tt,o))}function xi(i,o){Ue()&&A(tt,!1)}function tn(i,o){if(Ue()){i.preventDefault(),A(tt,!1);let r=parseInt(i.dataTransfer.getData("source")),m=o;r!=m&&ki(r,m)}}function ki(i,o){let r=[...E()];i<o?(r.splice(o+1,0,r[i]),r.splice(i,1)):(r.splice(o,0,r[i]),r.splice(i+1,1)),E(r)}function Ii(){const{height:i}=window.visualViewport,{bottom:o,height:r}=l(mt).getBoundingClientRect(),{height:m}=l(me).getBoundingClientRect();o+m>i?cn(me,l(me).style.top=`-${r+m}px`):cn(me,l(me).style.top="0px")}Le(()=>(pe(c()),pe(_())),()=>{c(),_()||Ye()}),Le(()=>pe(E()),()=>{E(),li()}),Le(()=>(l(V),l(Z)),()=>{ei(l(V)&&l(Z)&&l(Z)>=0&&l(Z)<l(V).length?l(V)[l(Z)].item:null)}),Le(()=>(l(xe),pe(c()),l(qe)),()=>{A(s,l(xe)&&(c()&&c().length>0||l(qe)>0))}),Le(()=>(pe(F()),pe(E())),()=>{A(u,F()&&E()&&E().length>0||!F()&&E())}),Le(()=>(pe(Mt()),pe(L()),pe(F()),l(u)),()=>{A(d,Mt()||(L()||F())&&l(u))}),Le(()=>(pe(L()),l(u)),()=>{A(g,L()&&l(u))}),ol(),vl();var Ie=uo();G("click",fn,fi),G("scroll",fn,()=>A(Ge,!0));var Me=P(Ie),Ni=P(Me);ce(Ni,()=>!F()&&l(u),i=>{var o=eo(),r={},m=P(o);te(()=>he(m,je(E()))),q(o),te(()=>{r!==(r=I()(E(),!0))&&(o.value=(o.__value=I()(E(),!0))==null?"":I()(E(),!0))}),R(i,o)},i=>{var o=ve(),r=ee(o);ce(r,()=>F()&&l(u),m=>{var O=ve(),j=ee(O);Ve(j,1,E,ft,(D,M)=>{var z=to(),B={},U=P(z);te(()=>he(U,je(l(M)))),q(z),te(()=>{B!==(B=I()(l(M),!0))&&(z.value=(z.__value=I()(l(M),!0))==null?"":I()(l(M),!0))}),R(D,z)}),R(m,O)},null,!0),R(i,o)}),q(Me);var nt=J(Me,2);rt(nt,i=>A(mt,i),()=>l(mt));var nn=P(nt);ce(nn,()=>F()&&l(u),i=>{var o=ve(),r=ee(o);Ve(r,11,E,m=>I()(m,!0),(m,O,j)=>{var D=io();we(D,"draggable",!0);var M=P(D);De(M,e,"tag",{get label(){return je(l(O))},get item(){return l(O)},unselectItem:Xe},z=>{var B=no(),U=P(B),K=P(U);te(()=>he(K,je(l(O)))),q(U);var ae=J(U,2),be=At(()=>Xe(l(O)));q(B),G("click",ae,yn(function(...Ae){var Pe;(Pe=l(be))==null||Pe.apply(this,Ae)})),G("keypress",ae,yn(Ae=>{Ae.key=="Enter"&&Xe(l(O))})),R(z,B)}),q(D),te(()=>Oe(D,"is-active",l(tt)===l(j))),Nl(D,()=>Zl,()=>({duration:200})),Sl(3,D,()=>$l,()=>({duration:200})),G("dragstart",D,z=>wi(z,l(j))),G("dragover",D,z=>en(z,l(j))),G("dragleave",D,z=>xi(z,l(j))),G("drop",D,z=>tn(z,l(j))),R(m,D)}),R(i,o)});var de=J(nn,2);rt(de,i=>A(Fe,i),()=>l(Fe)),An(de);let ln;var Si=J(de,2);ce(Si,()=>l(d),i=>{var o=lo(),r=P(o);Tt(r,Bn),q(o),G("click",o,$t),G("keypress",o,m=>{m.key=="Enter"&&$t()}),R(i,o)}),q(nt);var it=J(nt,2);rt(it,i=>A(me,i),()=>l(me));var Ci=P(it);return ce(Ci,()=>l(V)&&l(V).length>0,i=>{var o=ro(),r=ee(o);De(r,e,"dropdown-header",{get nbItems(){return l(V).length},get maxItemsToShowInList(){return T()}},null);var m=J(r,2);Ve(m,1,()=>l(V),ft,(j,D,M)=>{var z=ve(),B=ee(z);ce(B,()=>l(D)&&(T()<=0||M<T()),U=>{var K=oo();const ae=al(()=>yi(l(D).item));te(()=>Oe(K,"confirmed",l(ae)));var be=P(K);De(be,e,"item",{get item(){return l(D).item},get label(){return l(D).highlighted?l(D).highlighted:l(D).label}},Ae=>{var Pe=ve(),Ti=ee(Pe);ce(Ti,()=>l(D).highlighted,kt=>{var He=ve(),It=ee(He);Tt(It,()=>l(D).highlighted),R(kt,He)},kt=>{var He=ve(),It=ee(He);Tt(It,()=>l(D).label),R(kt,He)}),R(Ae,Pe)}),q(K),te(()=>Oe(K,"selected",M===l(Z))),G("click",K,()=>Jt(l(D))),G("keypress",K,Ae=>{Ae.key=="Enter"&&Jt(l(D))}),G("pointerenter",K,()=>{A(Z,M)}),R(U,K)}),R(j,z)});var O=J(m,2);De(O,e,"dropdown-footer",{get nbItems(){return l(V).length},get maxItemsToShowInList(){return T()}},j=>{var D=ve(),M=ee(D);ce(M,()=>T()>0&&l(V).length>T(),z=>{var B=ve(),U=ee(B);ce(U,Bt,K=>{var ae=ao(),be=P(ae);q(ae),te(()=>he(be,`...${l(V).length-T()}
              ${Bt()??""}`)),R(K,ae)}),R(z,B)}),R(j,D)}),R(i,o)},i=>{var o=ve(),r=ee(o);ce(r,()=>l(Be)&&_t(),m=>{var O=so(),j=P(O);De(j,e,"loading",{get loadingText(){return _t()}},D=>{var M=Nt();te(()=>he(M,_t())),R(D,M)}),q(O),R(m,O)},m=>{var O=ve(),j=ee(O);ce(j,Y,D=>{var M=co(),z=P(M);De(z,e,"create",{get createText(){return qt()}},B=>{var U=Nt();te(()=>he(U,qt())),R(B,U)}),q(M),G("click",M,Ze),G("keypress",M,B=>{B.key=="Enter"&&Ze()}),R(D,M)},D=>{var M=ve(),z=ee(M);ce(z,gt,B=>{var U=fo(),K=P(U);De(K,e,"no-results",{get noResultsText(){return gt()}},ae=>{var be=Nt();te(()=>he(be,gt())),R(ae,be)}),q(U),R(B,U)},null,!0),R(D,M)},!0),R(m,O)},!0),R(i,o)}),q(it),q(Ie),te(()=>{Lt(Ie,`${(Pt()?Pt():"")??""} autocomplete select is-fullwidth ${Vt??""} svelte-75ckfb`),Oe(Ie,"hide-arrow",Mn()||!c().length),Oe(Ie,"is-multiple",F()),Oe(Ie,"show-clear",l(d)),Oe(Ie,"is-loading",qn()&&l(Be)),we(Me,"name",Kn()),we(Me,"id",Vn()),Me.multiple=F(),ln=bl(de,ln,{type:"text",class:`${(Ht()?Ht():"")??""} ${(Zn()?"":"input autocomplete-input")??""}`,id:ze()?ze():"",autocomplete:Gn()?"on":Jn(),placeholder:Pn(),name:Hn(),disabled:Wn(),required:Qn(),title:Un(),readonly:Yn()||l(g),tabindex:Xn(),...a},"svelte-75ckfb"),Lt(it,`${(Kt()?Kt():"")??""} autocomplete-list ${(l(s)?"":"hidden")??""}
    is-fullwidth svelte-75ckfb`)}),On(de,fe),G("input",de,hi),G("focus",de,bi),G("blur",de,pi),G("keydown",de,ui),G("click",de,gi),G("keypress",de,di),G("dragover",de,i=>en(i,E().length-1)),G("drop",de,i=>tn(i,E().length-1)),R(t,Ie),Tl(e,"highlightFilter",xt),ht({highlightFilter:xt})}var ho=W(`<div id="dag-wrapper" class="svelte-1g1gx9t"><!> <div id="search-box-wrapper" class="svelte-1g1gx9t"><!></div></div> <div id="node-info-box-wrapper" class="svelte-1g1gx9t"><!></div> <h2>Potential improvements:</h2> <i>Not done due to timeframe.</i> <ul style="max-width: 750px"><li>The list of names in the autocomplete could be fetched once, then not updated.  This would require using the name as the selected item rather than the item itself, which is why I didn't get around to it.</li> <li>Calculating the tree relations could be improved using an object (which hashes properties), but that is overkill if we're not talking about a significant number of nodes.</li> <li>Node ordering could be improved - in the example graph, either G should be moved above E and F or E and F should be swapped (shorter lines and better grouping is preferable).</li> <li>Clarity is needed on maximum depth: if the graph is unfiltered, it's unclear if it should have an effect because of the potential of splitting it into multiple graphs.</li> <li>The infobox on the right should have a button to filter to only parents of that node.</li> <li>Node types should probably be indicated visually on the graph - each box could be shaped differently, for instance.  This is dependent on whether there is a hard limit on node types.</li> <li>Clicking and dragging on the graph / background should scroll.</li> <li>When filtered to a node, the children of that node should be accessible in some way (so that the graph can be navigated).</li> <li>Arrows could be added to lines to indicate direction of relations.  It's not clear whether this is needed (as it can only go one way) but it might be nice.</li> <li>Relations which span multiple columns should attempt to avoid going under other nodes.</li></ul>`,1);function wo(t,e){vt(e,!0);let n=Se(ye([]));const a=600,s=800;let u=Se(null),d=Se(null);Et(()=>{var k;fetch(`/graph/${((k=l(u))==null?void 0:k.node_name)||""}`).then(N=>{N.json().then(w=>{A(n,ye(w.map(h=>{try{return new Fl(h.node_name,h.node_type,h.tags,h.children)}catch{return null}}).filter(h=>h!==null))),l(n).forEach(h=>{h.children=h.child_names.map(S=>l(n).find(H=>H.node_name===S)).filter(S=>S!==void 0),h.children.forEach(S=>S.parents.push(h))})})})});var g=ho(),c=ee(g),_=P(c),p=At(()=>!!l(u));Yl(_,{get nodeList(){return l(n)},width:s,height:a,get isFiltered(){return l(p)},get selectedNode(){return l(d)},set selectedNode(k){A(d,ye(k))}});var f=J(_,2),b=P(f);vo(b,{get items(){return l(n)},get selectedItem(){return l(u)},set selectedItem(k){A(u,ye(k))},labelFieldName:"node_name",hideArrow:"true",showClear:"true",className:"search-box"}),q(f),q(c);var y=J(c,2),x=P(y),I=At(()=>l(d)||l(u));Dl(x,{get selectedNode(){return l(I)}}),q(y),Tn(6),R(t,g),ht()}export{wo as component};
